<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>预约界面</title>
</head>
<body>
    <div id="counterContainer">
        <p>预约数量: <span id="counter">0</span></p>
        <button id="reserveButton">预约</button>
    </div>

    <!-- 引入您的JavaScript文件 -->
    <script src="js/reserve.js"></script>
</body>
</html>

// 获取DOM元素
var reserveButton = document.getElementById('reserveButton');
var counterElement = document.getElementById('counter');

// 页面加载时获取当前的预约数量
window.onload = function() {
    getReservationCount();
};

// 增加预约数量
reserveButton.addEventListener('click', function() {
    increaseReservationCount();
});

// 发送GET请求获取预约数量
function getReservationCount() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/api/reservations', true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            updateCounterDisplay(data.count);
        }
    };
    xhr.send();
}

// 发送POST请求增加预约数量
function increaseReservationCount() {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/api/reservations', true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            updateCounterDisplay(data.count);
        }
    };
    xhr.send();
}

// 更新页面上的预约数量显示
function updateCounterDisplay(count) {
    counterElement.textContent = count;
}



<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>预约页面</title>
<script>
// 假设我们有一个函数用来从服务器获取当前预约数量
function getCurrentReservationCount() {
    // 这里应该是异步请求服务器获取预约数的代码，例如使用fetch API
    return 5; // 假设初始预约数是5
}

// 假设我们有一个函数用来更新服务器上的预约数量
function updateReservationCount(newCount) {
    // 这里应该是异步请求服务器更新预约数的代码，例如使用fetch API
    console.log("预约数更新为：" + newCount);
}

window.onload = function() {
    // 页面加载完毕后获取当前的预约数量
    document.getElementById('reservation-count').textContent = getCurrentReservationCount();
};

function incrementReservation() {
    var currentCount = parseInt(document.getElementById('reservation-count').textContent, 10);
    if (!isNaN(currentCount)) {
        var newCount = currentCount + 1;
        document.getElementById('reservation-count').textContent = newCount;
        updateReservationCount(newCount); // 更新服务器上的预约数
    }
}
</script>
</head>
<body>
<h1>预约页面</h1>
<p>当前预约数量： <span id="reservation-count">?</span></p>
<button onclick="incrementReservation()">增加预约</button>
</body>
</html>


点击链接加入群聊【<$ÿĀ">《荣耀》官方交流群<$ÿĀ><$ÿĀ>华夏制作】：http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=yA1GUjtjqBe6p992RDc8AZEcftXCYWR0&authKey=hOV2mxUUG%2FUrHAuL6y0tCLjq%2B5CXQceK3srP%2FDUhnEPPqv%2Bn%2BvNo%2BK3tyf%2FDL7iF&noverify=0&group_code=693700376