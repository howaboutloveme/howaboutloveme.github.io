<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>预约界面</title>
</head>
<body>
    <div id="counterContainer">
        <p>预约数量: <span id="counter">0</span></p>
        <button id="reserveButton">预约</button>
    </div>

    <!-- 引入您的JavaScript文件 -->
    <script src="js/reserve.js"></script>
</body>
</html>

// 获取DOM元素
var reserveButton = document.getElementById('reserveButton');
var counterElement = document.getElementById('counter');

// 页面加载时获取当前的预约数量
window.onload = function() {
    getReservationCount();
};

// 增加预约数量
reserveButton.addEventListener('click', function() {
    increaseReservationCount();
});

// 发送GET请求获取预约数量
function getReservationCount() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/api/reservations', true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            updateCounterDisplay(data.count);
        }
    };
    xhr.send();
}

// 发送POST请求增加预约数量
function increaseReservationCount() {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/api/reservations', true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            updateCounterDisplay(data.count);
        }
    };
    xhr.send();
}

// 更新页面上的预约数量显示
function updateCounterDisplay(count) {
    counterElement.textContent = count;
}




<template>
  <div>
    <h1>预约服务</h1>
    <form @submit.prevent="handleSubmit">
      <label>
        姓名:
        <input type="text" v-model="formData.name" required />
      </label>
      <label>
        邮箱:
        <input type="email" v-model="formData.email" required />
      </label>
      <label>
        预约时间:
        <input type="datetime-local" v-model="formData.time" required />
      </label>
      <button type="submit">预约</button>
    </form>
  </div>
</template>

<script>
import axios from 'axios';

export default {
  data() {
    return {
      formData: {
        name: '',
        email: '',
        time: ''
      }
    };
  },
  methods: {
    handleSubmit() {
      axios.post('/api/appointments', this.formData)
        .then(response => {
          // 处理预约成功的逻辑
        })
        .catch(error => {
          // 处理错误的逻辑
        });
    }
  }
};
</script>

<style scoped>
/* 添加样式 */
</style>

